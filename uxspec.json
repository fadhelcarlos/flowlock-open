{
  "version": "1.0.0",
  "project": "demo-app",
  "name": "FlowLock Demo Application",
  "description": "Comprehensive demo showcasing all FlowLock features",
  "entities": [
    {
      "id": "user",
      "name": "User",
      "fields": [
        {
          "id": "id",
          "name": "ID",
          "type": "string",
          "required": true,
          "derived": true,
          "provenance": "system.uuid"
        },
        {
          "id": "email",
          "name": "Email",
          "type": "email",
          "required": true
        },
        {
          "id": "name",
          "name": "Name",
          "type": "string",
          "required": true
        },
        {
          "id": "role",
          "name": "Role",
          "type": "string"
        },
        {
          "id": "createdAt",
          "name": "Created At",
          "type": "date",
          "derived": true,
          "provenance": "system.timestamp"
        }
      ],
      "relations": [
        {
          "id": "orders",
          "to": "order",
          "kind": "1:many"
        },
        {
          "id": "profile",
          "to": "profile",
          "kind": "1:1"
        }
      ]
    },
    {
      "id": "product",
      "name": "Product",
      "fields": [
        {
          "id": "id",
          "name": "ID",
          "type": "string",
          "required": true,
          "external": true,
          "source": "catalog_api"
        },
        {
          "id": "name",
          "name": "Name",
          "type": "string",
          "required": true,
          "external": true,
          "source": "catalog_api"
        },
        {
          "id": "description",
          "name": "Description",
          "type": "text",
          "external": true,
          "source": "catalog_api"
        },
        {
          "id": "price",
          "name": "Price",
          "type": "number",
          "required": true,
          "external": true,
          "source": "catalog_api"
        },
        {
          "id": "stock",
          "name": "Stock",
          "type": "number",
          "external": true,
          "source": "catalog_api"
        }
      ],
      "relations": [
        {
          "id": "category",
          "to": "category",
          "kind": "many:1"
        },
        {
          "id": "reviews",
          "to": "review",
          "kind": "1:many"
        }
      ]
    }
  ],
  "screens": [
    {
      "id": "user_list",
      "name": "User List",
      "type": "list",
      "entityId": "user",
      "reads": [
        "user.id",
        "user.name",
        "user.email",
        "user.role"
      ],
      "roles": [
        "admin",
        "viewer"
      ],
      "uiStates": [
        "empty",
        "loading",
        "error"
      ],
      "routes": ["/users", "/admin/users"],
      "lists": [
        {
          "id": "user_table",
          "reads": ["user.id", "user.name", "user.email", "user.role"],
          "sortable": true,
          "filterable": true,
          "paginated": true
        }
      ],
      "ctas": [
        {
          "id": "create_user",
          "label": "Add User",
          "to": "user_create",
          "type": "primary"
        },
        {
          "id": "view_details",
          "label": "View",
          "to": "user_detail",
          "type": "link"
        }
      ]
    },
    {
      "id": "user_detail",
      "name": "User Detail",
      "entityId": "user",
      "reads": [
        "user.id",
        "user.name",
        "user.email",
        "user.role",
        "user.createdAt"
      ],
      "type": "detail",
      "roles": [
        "admin",
        "viewer"
      ],
      "uiStates": [
        "empty",
        "loading",
        "error"
      ],
      "routes": ["/users/:id"],
      "cards": [
        {
          "id": "user_info",
          "reads": ["user.name", "user.email", "user.role", "user.createdAt"]
        }
      ],
      "ctas": [
        {
          "id": "edit_user",
          "label": "Edit",
          "to": "user_edit",
          "type": "primary"
        },
        {
          "id": "back_to_list",
          "label": "Back",
          "to": "user_list",
          "type": "link"
        }
      ]
    },
    {
      "id": "user_create",
      "name": "Create User",
      "type": "form",
      "entityId": "user",
      "forms": [
        {
          "id": "create_user_form",
          "entityId": "user",
          "type": "create",
          "fields": [
            {
              "fieldId": "email",
              "label": "Email Address"
            },
            {
              "fieldId": "name",
              "label": "Full Name"
            },
            {
              "fieldId": "role",
              "label": "User Role"
            }
          ],
          "writes": ["user.email", "user.name", "user.role"]
        }
      ],
      "roles": [
        "admin",
        "viewer"
      ],
      "uiStates": [
        "empty",
        "loading",
        "error"
      ],
      "routes": ["/users/new"],
      "ctas": [
        {
          "id": "submit",
          "label": "Create User",
          "to": "user_created",
          "type": "primary"
        },
        {
          "id": "cancel",
          "label": "Cancel",
          "to": "user_list",
          "type": "secondary"
        }
      ]
    },
    {
      "id": "user_created",
      "name": "User Created",
      "type": "success",
      "roles": [
        "admin",
        "viewer"
      ],
      "uiStates": [
        "empty",
        "loading",
        "error"
      ],
      "routes": ["/users/success"],
      "ctas": [
        {
          "id": "view_user",
          "label": "View User",
          "to": "user_detail",
          "type": "primary"
        },
        {
          "id": "create_another",
          "label": "Create Another",
          "to": "user_create",
          "type": "secondary"
        }
      ]
    },
    {
      "id": "product_list",
      "name": "Product Catalog",
      "type": "list",
      "entityId": "product",
      "reads": [
        "product.id",
        "product.name",
        "product.price",
        "product.stock"
      ],
      "roles": [
        "admin",
        "viewer"
      ],
      "uiStates": [
        "empty",
        "loading",
        "error"
      ],
      "routes": ["/products", "/catalog"],
      "lists": [
        {
          "id": "product_grid",
          "reads": ["product.id", "product.name", "product.price", "product.stock"],
          "sortable": true,
          "filterable": true,
          "paginated": true
        }
      ],
      "ctas": [
        {
          "id": "view_product",
          "label": "View Details",
          "to": "product_detail",
          "type": "primary"
        }
      ]
    },
    {
      "id": "product_detail",
      "name": "Product Detail",
      "entityId": "product",
      "reads": [
        "product.id",
        "product.name",
        "product.description",
        "product.price",
        "product.stock"
      ],
      "type": "detail",
      "roles": [
        "admin",
        "viewer"
      ],
      "uiStates": [
        "empty",
        "loading",
        "error"
      ],
      "routes": ["/products/:id"],
      "cards": [
        {
          "id": "product_info",
          "reads": ["product.name", "product.description", "product.price", "product.stock"]
        }
      ],
      "ctas": [
        {
          "id": "add_to_cart",
          "label": "Add to Cart",
          "to": "cart",
          "type": "primary"
        },
        {
          "id": "back_to_catalog",
          "label": "Back",
          "to": "product_list",
          "type": "link"
        }
      ]
    }
  ],
  "flows": [
    {
      "id": "create_user_flow",
      "name": "Create User Flow",
      "jtbd": "admin",
      "role": "admin",
      "entryStepId": "cu_1",
      "steps": [
        {
          "id": "cu_1",
          "screenId": "user_list",
          "next": [
            {
              "targetStepId": "cu_2"
            }
          ],
          "reads": ["user.id", "user.name", "user.email"]
        },
        {
          "id": "cu_2",
          "screenId": "user_create",
          "next": [
            {
              "targetStepId": "cu_3"
            }
          ],
          "writes": ["user.email", "user.name", "user.role"],
          "transition": {
            "entity": "user",
            "from": "pending",
            "to": "active"
          }
        },
        {
          "id": "cu_3",
          "screenId": "user_created",
          "next": [
            {
              "targetStepId": "cu_4"
            }
          ]
        },
        {
          "id": "cu_4",
          "screenId": "user_detail",
          "reads": ["user.id", "user.name", "user.email", "user.role", "user.createdAt"]
        }
      ],
      "success": {
        "screen": "user_detail",
        "message": "User created successfully"
      }
    },
    {
      "id": "browse_products_flow",
      "name": "Browse Products",
      "jtbd": "viewer",
      "role": "viewer",
      "entryStepId": "bp_1",
      "steps": [
        {
          "id": "bp_1",
          "screenId": "product_list",
          "next": [
            {
              "targetStepId": "bp_2"
            }
          ]
        },
        {
          "id": "bp_2",
          "screenId": "product_detail"
        }
      ]
    }
  ],
  "jtbd": [
    {
      "role": "admin",
      "tasks": [
        "Create user",
        "Review users",
        "Manage user permissions",
        "Monitor system activity"
      ],
      "description": "Administrative oversight and user management"
    },
    {
      "role": "viewer",
      "tasks": [
        "Browse products",
        "See product detail",
        "Compare products",
        "Find items within budget"
      ],
      "description": "Browse and discover products efficiently"
    }
  ],
  "roles": [
    {
      "id": "admin",
      "name": "Administrator",
      "permissions": ["create", "read", "update", "delete"]
    },
    {
      "id": "viewer",
      "name": "Viewer",
      "permissions": ["read"]
    }
  ],
  "states": [
    {
      "entity": "user",
      "allowed": ["pending", "active", "suspended", "deleted"],
      "initial": "pending",
      "terminal": ["deleted"],
      "transitions": [
        { "from": "pending", "to": "active", "trigger": "verify" },
        { "from": "active", "to": "suspended", "trigger": "suspend" },
        { "from": "suspended", "to": "active", "trigger": "reactivate" },
        { "from": "active", "to": "deleted", "trigger": "delete" },
        { "from": "suspended", "to": "deleted", "trigger": "delete" }
      ]
    }
  ],
  "glossary": [
    {
      "term": "system.uuid",
      "definition": "System-generated unique identifier",
      "formula": "crypto.randomUUID()"
    },
    {
      "term": "system.timestamp",
      "definition": "Server-generated timestamp",
      "formula": "new Date().toISOString()"
    },
    {
      "term": "catalog_api",
      "definition": "External product catalog service",
      "source": "https://api.catalog.example/v1"
    }
  ]
}